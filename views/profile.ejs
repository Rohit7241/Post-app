<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="align">
    <div class="w-full min-h-screen bg-zinc-800 text-white p-10 flex flex-col ">
      <div class="flex justify-end">
        <a class="bg-red-500 text-white rounded w-fit p-3 text-xl  " href="/logout">Logout</a> 
      </div> 
      <div class=" flex justify-start items-center mb-10">
        <div class="w-20 h-20  rounded-full overflow-hidden">
          <a href="/profile/upload"><img class="w-full h-full" src="/images/uploads/<%=user.profilepic%>" alt=""></a>
        </div>
        <h3 class="text-3xl mb-5 ml-5">Welcome , <%=user.name%> !</h3>
      </div>
       <form class="flex flex-col"action="/post" method="post">
 <textarea required name="content" class="p-3 rounded-md outline-none w-1/3 h-50 resize-none bg-transparent border-2 border-zinc-500 " placeholder="What's on your mind"></textarea>
<input class="px-3 py-2 bg-blue-500 w-fit h-10 mt-5  rounded-full" type="submit" value="Create New Post">       
</form>
     <div class="posts mt-10">
        <h3 class="text-3xl">Your Posts</h3>
        <h3 class="text-zinc-200 font-light mt-5"><%if(user.posts.length===0){%>No posts yet<%}%></h3>
       <%user.posts.reverse().forEach((post)=>{%>
        <div class="postcontent">
          <div class=" post mt-5 p-5 rounded-md border-2 border-zinc-600 w-150 h-fit">
            <a class="text-blue-500" href="/profile">@<%=user.username%></a>
          <p class="p-1"><%=post.content%></p>
            <p class="mt-2 inline-block"><%=post.likes.length%> likes</p>
        <div class="btns flex mt-3 flex justify-between">
        <a class="bg-pink-500 w-fit flex justify-center p-1 rounded-md " href="/like/<%=post._id%>">
          <%=post.likes.indexOf(user._id)?"Like":"Unlike"%>
        </a>
       <div class="flex">
        <a class="mr-2 bg-zinc-500 w-10 flex justify-center p-1 rounded-md "href="/edit/<%=post._id%>">Edit</a>
        <a class="bg-zinc-500 w-fit flex justify-center p-1 rounded-md "href="/delete/<%=post._id%>">Delete</a>
       </div>    
      </div>
        </div>
        </div>
        <%})%>
       
     </div>
    </div>
</body>
</html>